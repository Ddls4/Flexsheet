<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Test Socket Mongo</title>
  <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
</head>
<body>
  <h2>Test Backend Mongo + Socket.IO</h2>

  <div>
    <h3>Registrar Usuario</h3>
    <input id="username" placeholder="Usuario">
    <input id="password" placeholder="Password" type="password">
    <button onclick="registrar()">Registrar</button>
  </div>

  <div>
    <h3>Crear Card</h3>
    <input id="title" placeholder="TÃ­tulo">
    <input id="date" placeholder="Fecha">
    <input id="imagenURL" placeholder="URL Imagen">
    <button onclick="createCard()">Crear Card</button>
  </div>

  <div>
    <h3>Solicitar Cards</h3>
    <button onclick="solicitarCards()">Traer Cards</button>
  </div>

  <pre id="output"></pre>

  <script>
    const socket = io("http://localhost:9000");

    const output = document.getElementById("output");

    function log(msg) {
      console.log(msg);
      output.textContent += JSON.stringify(msg, null, 2) + "\n";
    }

    socket.on("connect", () => log({ conectado: socket.id }));
    socket.on("disconnect", () => log({ desconectado: true }));

    function registrar() {
      const username = document.getElementById("username").value;
      const password = document.getElementById("password").value;
      socket.emit("registrar", { username, password }, (res) => log({ registrar: res }));
    }

    function createCard() {
      const title = document.getElementById("title").value;
      const date = document.getElementById("date").value;
      const imagenURL = document.getElementById("imagenURL").value;
      socket.emit("create_card", { title, date, imagenURL }, (res) => log({ create_card: res }));
    }

    function solicitarCards() {
      socket.emit("solicitar_cards", (res) => log({ solicitar_cards: res }));
    }
  </script>
</body>
</html>
